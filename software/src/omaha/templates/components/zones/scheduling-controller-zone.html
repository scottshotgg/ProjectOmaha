<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="/bower_components/iron-icons/image-icons.html">
<link rel="import" href="/bower_components/paper-card/paper-card.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/paper-slider/paper-slider.html">
<link rel="import" href="/bower_components/paper-toast/paper-toast.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="/bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="/bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="/bower_components/paper-styles/paper-styles.html">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="/components/simple-fit.html">
<link rel="import" href="/components/speaker-controller.html">
<link rel="import" href="/bower_components/neon-animation/neon-animation.html">

<link rel="import" href="/components/omaha-app.html">

<link rel="stylesheet" href="../jquery-ui-1.11.4.css">
<script src="../jquery-1.10.2.js" type="text/jscript"></script>
<script src="../Chart.js" type="text/jscript"></script>
<script src="../jquery-ui-1.11.4.js" type="text/jscript"></script>
<script src="../jquery.ui.touch-punch.js" type="text/jscript"></script>

<dom-module id="scheduling-controller-zone" class="layout horizontal">

  <template>

    <style>
      :host {
        display: block;
      }

      #map {
        height: 100%;
        width: 100%;
      }

      paper-card {
        padding: 10px;
        width: 100%;
        text-align: center;
      }

      #zoneBtn {
        background-color: #4285f4;
        color: #fff;
        margin-top: 5px;
        width: 100%;
      }
      
      #pageContainer {
        text-align: center;
        height: 100%;
      }

      #zoneMap {
        height: 100%;
      }

      #mainContainer {
        overflow-y: hidden;
      }

      #mainContainer.paper-header-panel {
        position: relative;
        overflow-y: scroll;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
        height: 100%;
      }
      
      paper-button {
        background-color: #3f51b5;
        color: #fff;
      }

      paper-input /deep/ #input {
        margin-top: 0px;
        text-align: center;
      }

      paper-item::shadow .button-content {
        padding: 0;
        width: 100%;
        text-align: center;
      }

      .pagingZoneStyle {
        background: rgba(63, 81, 181, .1); 
        border-style: solid; 
        border-radius: 5px; 
        border-width: 1px; 
        border-color: #3f51b5; 
        margin: 5px; 
      }

      .timesZone {
        width: calc(.02 * 100vw);
        margin-right: calc(.0118 * 100vw);
        margin-top: calc(-.015 * 100vh);
      }

    </style>
    <paper-card heading="Scheduling" elevation="4">
      <div id="card-contentZone" class="card-content" style="height: calc(.44 * 100vh);">

      	<paper-radio-group id="schedulingSelectorZone" selected="{{mode}}">
          <paper-radio-button id="basicModeButtonZone" 			name="basic"     onclick="drawBasicZone()" class="flex">Basic</paper-radio-button>
          <paper-radio-button id="advancedModeButtonZone"   name="advanced"  onclick="drawAdvancedZone()" class="flex">Advanced</paper-radio-button>
        </paper-radio-group>
        <neon-animated-pages attr-for-selected="pageZone" selected="[[mode]]" class="flex">

        	<neon-animatable pageZone="basic" class="horizontal layout" entry-animation="slide-from-right-animation" exit-animation="slide-right-animation">
            <simple-fit class="container">
            <div id="basic_containerZone" style="margin-top: calc(.45 * 100vh);">
              <h3>Ramp Up</h3>
            	<div id="rampUpContainerZone" class="horizontal layout">
            		<!-- 
            		<paper-input id="rampUpTime"	name="rampUpTime"		on-input="" style="width: 166px; margin-left: calc(.006 * 100vw);" label="Time" ></paper-input>
            		-->
            		<paper-dropdown-menu id="upTimeZone" name="upTime" label="Ramp Up Time">
								  <paper-listbox id="upTimeListBoxZone" class="dropdown-content" style="width: 100px; overflow-x: hidden;">
								    <paper-item value="0">00:00</paper-item>
								    <paper-item value="1">01:00</paper-item>
								    <paper-item value="2">02:00</paper-item>
								    <paper-item value="3">03:00</paper-item>
								    <paper-item value="4">04:00</paper-item>
								    <paper-item value="5">05:00</paper-item>
								    <paper-item value="6">06:00</paper-item>
								    <paper-item value="7">07:00</paper-item>
								    <paper-item value="8">08:00</paper-item>
								    <paper-item value="9">09:00</paper-item>
								    <paper-item value="10">10:00</paper-item>
								    <paper-item value="11">11:00</paper-item>
								    <paper-item value="12">12:00</paper-item>
								    <paper-item value="13">13:00</paper-item>
								    <paper-item value="14">14:00</paper-item>
								    <paper-item value="15">15:00</paper-item>
								    <paper-item value="16">16:00</paper-item>
								    <paper-item value="17">17:00</paper-item>
								    <paper-item value="18">18:00</paper-item>
								    <paper-item value="19">19:00</paper-item>
								    <paper-item value="20">20:00</paper-item>
								    <paper-item value="21">21:00</paper-item>
								    <paper-item value="22">22:00</paper-item>
								    <paper-item value="23">23:00</paper-item>
								  </paper-listbox>
								</paper-dropdown-menu>
            		<!--
            		<paper-input id="rampUpLevel"	name="rampUpLevel"	on-input="" style="width: 166px; margin-left: 25px; float: right;" label="Percentage" ></paper-input>
								-->
            		<paper-dropdown-menu id="rampUpLevelZone" name="rampUpLevel" label="Percentage" style="width: 166px; margin-left: 25px; float: right;">
								  <paper-listbox id="rampUpLevelListboxZone" class="dropdown-content" style="width: 100px; overflow-x: hidden;">
								    <paper-item value="0">0%</paper-item>
								    <paper-item value="10">10%</paper-item>
								    <paper-item value="20">20%</paper-item>
								    <paper-item value="30">30%</paper-item>
								    <paper-item value="40">40%</paper-item>
								    <paper-item value="50">50%</paper-item>
								    <paper-item value="60">60%</paper-item>
								    <paper-item value="70">70%</paper-item>
								    <paper-item value="80">80%</paper-item>
								    <paper-item value="90">90%</paper-item>
								    <paper-item value="100">100%</paper-item>
								  </paper-listbox>
								</paper-dropdown-menu>
            	</div>

            	<h3 style="margin-top: calc(.02 * 100vw)">Ramp Down</h3>
            	<div id="rampDownContainer" class="horizontal layout" style="margin-top: calc(.005 * 100vw);">
            		<!--
            		<paper-input id="rampDownTime"	name="rampDownTime"		on-input="" style="width: 166px; margin-left: calc(.006 * 100vw);" label="Time" ></paper-input>
            		-->
            		<paper-dropdown-menu id="downTimeZone" name="downTime" label="Ramp Down Time">
								  <paper-listbox id="downTimeListBoxZone" class="dropdown-content" style="width: 100px; overflow-x: hidden;">
								    <paper-item value="0">00:00</paper-item>
								    <paper-item value="1">01:00</paper-item>
								    <paper-item value="2">02:00</paper-item>
								    <paper-item value="3">03:00</paper-item>
								    <paper-item value="4">04:00</paper-item>
								    <paper-item value="5">05:00</paper-item>
								    <paper-item value="6">06:00</paper-item>
								    <paper-item value="7">07:00</paper-item>
								    <paper-item value="8">08:00</paper-item>
								    <paper-item value="9">09:00</paper-item>
								    <paper-item value="10">10:00</paper-item>
								    <paper-item value="11">11:00</paper-item>
								    <paper-item value="12">12:00</paper-item>
								    <paper-item value="13">13:00</paper-item>
								    <paper-item value="14">14:00</paper-item>
								    <paper-item value="15">15:00</paper-item>
								    <paper-item value="16">16:00</paper-item>
								    <paper-item value="17">17:00</paper-item>
								    <paper-item value="18">18:00</paper-item>
								    <paper-item value="19">19:00</paper-item>
								    <paper-item value="20">20:00</paper-item>
								    <paper-item value="21">21:00</paper-item>
								    <paper-item value="22">22:00</paper-item>
								    <paper-item value="23">23:00</paper-item>
								  </paper-listbox>
								</paper-dropdown-menu>
            		<!--
            		<paper-input id="rampDownLevel"	name="rampDownLevel"	on-input="" style="width: 166px; margin-left: 25px; float: right;" label="Percentage" ></paper-input>
								-->
            		<paper-dropdown-menu id="rampDownLevelZone" name="rampDownLevel" label="Percentage" style="width: 166px; margin-left: 25px; float: right;">
								  <paper-listbox id="rampDownLevelListboxZone" class="dropdown-content" style="width: 100px; overflow-x: hidden;">
								    <paper-item value="0">0%</paper-item>
								    <paper-item value="10">10%</paper-item>
								    <paper-item value="20">20%</paper-item>
								    <paper-item value="30">30%</paper-item>
								    <paper-item value="40">40%</paper-item>
								    <paper-item value="50">50%</paper-item>
								    <paper-item value="60">60%</paper-item>
								    <paper-item value="70">70%</paper-item>
								    <paper-item value="80">80%</paper-item>
								    <paper-item value="90">90%</paper-item>
								    <paper-item value="100">100%</paper-item>
								  </paper-listbox>
								</paper-dropdown-menu>
            	</div>
           		<h3 style="margin-top: calc(.02 * 100vw)">Ramp Interval</h3> 
           		<div>
           		<!--
           			<paper-input id="rampInterval"	name="rampInterval"		on-input="" style="width: 166px; margin-left: 28%;" label="Interval" ></paper-input>
           		-->
           			<paper-dropdown-menu id="intervalZone" name="interval" label="Interval">
								  <paper-listbox id="intervalListboxZone" attr-for-selected="value" selected="{{interval}}" class="dropdown-content">
								    <paper-item value="0">Instant</paper-item>
								    <paper-item value="1">One Minute</paper-item>
								    <paper-item value="2">Two Minutes</paper-item>
								    <paper-item value="5">Five Minutes</paper-item>
								    <paper-item value="10">Ten Minutes</paper-item>
								    <paper-item value="15">Fifteen Minutes</paper-item>
								    <paper-item value="20">Twenty Minutes</paper-item>
								    <paper-item value="30">Thirty Minutes</paper-item>
								    <paper-item value="45">Forty Five Minutes</paper-item>
								    <paper-item value="60">One Hour</paper-item>
								  </paper-listbox>
								</paper-dropdown-menu>
           		</div>
            </div>
            </simple-fit>
        	</neon-animatable>

          <neon-animatable pageZone="advanced" style="height: calc(.6 * 100vh);" class="horizontal layout" entry-animation="slide-from-right-animation" exit-animation="slide-right-animation">
            <simple-fit class="container">
            <div>
							<canvas id="timingChartZone" style="margin-left: calc(.02 * 100vh); margin-right: calc(.02 * 100vh); margin-top: calc(.02 * 100vh);" class="chartClass"></canvas>
			        <div class="horizontal layout" id="adjustmentZone" style="height: calc(.025 * 100vh); margin-top: calc(.0 * 100vh); margin-bottom: 10px;">
			          <paper-input class="timesZone" name="00:00"   on-input="redrawTimingOnInputZone" center-justified style="margin-left: calc(.025 * 100vw);"></paper-input>
			          <paper-input class="timesZone" name="01:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="02:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="03:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="04:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="05:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="06:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="07:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="08:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="09:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="10:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="11:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="12:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="13:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="14:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="15:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="16:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="17:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="18:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="19:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="20:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="21:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="22:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="23:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			          <paper-input class="timesZone" name="24:00"   on-input="redrawTimingOnInputZone" ></paper-input>
			        </div>
			       </div>
            </simple-fit>
          </neon-animatable>
        </neon-animated-pages>
	    </div>
			<div class="card-actions">
			  <paper-dropdown-menu id="dayMenuZone" style="margin-top: 10px; margin-left: calc(0 * 100vw); overflow-x: hidden;" no-label-float label="Day:" vertical-align="top" horizontal-align="left">
		    	<paper-listbox id="dayListboxZone" style="width: 150px; overflow-x: hidden;" attr-for-selected="value" selected="{{selection}}" class="dropdown-content">
		          <!--<template if="{{this.speaker.Response}}">
		            <paper-dropdown-menu selected="{{selected}}">
		              <template repeat="{{label in this.speaker.PresetNames}}">
		                <paper-item value="{{i}}" label="{{label}}"></paper-item>
		              </template>
		            </paper-dropdown-menu>  
		          </template>-->   
			      <paper-item id="Sunday" 			value="0" on-click="loadDayZone">Sunday</paper-item>
			      <paper-item id="Monday" 			value="1" on-click="loadDayZone">Monday</paper-item>
			      <paper-item id="Tuesday" 			value="2" on-click="loadDayZone">Tuesday</paper-item>
			      <paper-item id="Wednesday" 		value="3" on-click="loadDayZone">Wednesday</paper-item>
			      <paper-item id="Thursday" 		value="4" on-click="loadDayZone">Thursday</paper-item>
			      <paper-item id="Friday" 			value="5" on-click="loadDayZone">Friday</paper-item>
			      <paper-item id="Saturday" 		value="6" on-click="loadDayZone">Saturday</paper-item>
			      <paper-item id="Entire Week" 	value="7" on-click="loadDayZone">Work Week Only</paper-item>
			      <paper-item id="Weekend Only" value="8" on-click="loadDayZone">Weekend Only</paper-item>
			      <paper-item id="Entire Week" 	value="9" on-click="loadDayZone">Entire Week</paper-item>
			    </paper-listbox>
			  </paper-dropdown-menu>

			  <paper-button center-justified flex dialog-dismiss style="margin-top: 10px; margin-left: calc(.01 * 100vw);" on-click="scheduleTimeZone">Apply</paper-button>
			</div>
		</paper-card>
                  <!-- A rougue missing tag, why is this here? -->
  	<paper-toast id="toast"></span>Zone Created!</paper-toast>
    <!-- <paper-card id="popup">
      <div>Current Zone: <span><b>{{selected.zone.name}}</b></span></div>
      <div><paper-button id="zoneBtn" on-click="_assignZone">assign zone</paper-button></div>
    </paper-card> -->
    <paper-dialog id="dialog">
      <zone-assigner on-zoneupdated="_refreshSpeaker" id="zoneAssigner" speaker="{{selected}}" zones="{{zones}}"></zone-assigner>
    </paper-dialog>



  	<paper-dialog id="zoneDialog" heading="this is a title" entry-animation="scale-up-animation" exit-animation="fade-out-animation" modal="true">
    <h1 style="text-align: center;">Calling selected...</h1>
    <!-- <div style="text-align: center;">Enter a name for the new zone below</div> -->
    <!-- <div class="message">{{err}}</font></div> -->
    <!-- <paper-input id="popupInput" label="" placeholder="Enter Name for Zone" text-align="center"></paper-input> -->



			<paper-toast id="errorAdjustToastZone"></paper-toast>
    <div class="buttons" class="layout horizontal">
    <!-- <paper-button ondialog-confirm on-click="_acceptPressed">Create</paper-button> -->
    	<paper-button center-justified flex dialog-dismiss style="margin: 0.5em 4.5em .5em 0em;" on-click="_cancelPressed">Cancel</paper-button>
  	</div>


    <iron-ajax
      id="scheduleTimeAjaxZone"
      url="/system/zone/scheduleTimeZone/"
      method="PUT"
      content-type="application/json"
      handle-as="json"
      on-response="_logResponse"
      debounce-duration="300">
    </iron-ajax>


    <!-- <help-panel></help-panel> -->
  </template>


<script>

	var timingDataArrayZone = [];

	//change the offsets to be static values instead of moving with the screen width of percentage wise
	var schedulingModeZone;
	var speakerForScheduling;
	var ssZone;

	var day = new Date().getDay();

	var myChart_timingZone; 

	var canvas_timingZone = document.getElementById("timingChartZone");
	var chart_width_scalar_timing = .8;
	var chart_height_scalar_timing = .52;

	function drawBasicZone() {
		ssZone.schedulingSelectorZone.selected = "basic";

		var localWidthZone = $(window).width() * .20;
		var localHeightZone = $(window).height() * .5;
		
		document.getElementById("card-contentZone").style.width = localWidthZone + "px";
		document.getElementById("card-contentZone").style.height = localHeightZone + "px";

		console.log(speaker);


	  loadDayOutsideZone();
	}

	function drawAdvancedZone() {
		canvas_timingZone = document.getElementById("timingChartZone");
		console.log(canvas_timingZone);
		ssZone.schedulingSelectorZone.selected = "advanced";

	  var localWidthZone = $(window).width() * .82;
		var localHeightZone = ($(window).height() + 36) * .62;

		document.getElementById("card-contentZone").style.width = localWidthZone + "px";
		document.getElementById("card-contentZone").style.height = localHeightZone + "px";

	  canvas_timingZone = document.getElementById("timingChartZone");
	  canvas_timingZone.width = $(window).width() * chart_width_scalar_timing;
	  canvas_timingZone.height = $(window).height() * chart_height_scalar_timing;

	  timingDataArrayZone = zones[0].Schedule[ssZone.dayListboxZone.selected].slice(4, 28);

	  $(document.getElementsByClassName("timesZone")).each(function(i) {
	    this.value = timingDataArrayZone[i];
	  });

	  var timingData = {
	    labels: timingLabels,
	    datasets: [{
	      fillColor: "rgba(63, 81, 181, 0.25)",
	      strokeColor: "#3f51b5",
	      pointColor: "#fff",
	      pointStrokeColor: "#3f51b5",  
	      data: timingDataArrayZone
	    }]
	  };

	  //myChart_timingZone = new Chart(canvas_timingZone.getContext("2d")).Line(timingData, timingLineAttributes);


	  console.log(timingDataArrayZone);


	  loadDayOutsideZone();
	}

	$(window).resize(function() {
		if(schedulingModeZone.selected == "advanced") {
	    /*$($(canvas_timingZone).parent()).prepend("<canvas id=\"timingChart\" style=\"margin-left: calc(.02 * 100vh); margin-right: calc(.02 * 100vh); margin-top: calc(.02 * 100vh);\" class=\"chartClass\"></canvas>");

	    canvas_timingZone.remove();		

	    var localWidthZone = $(window).width() * .82;
	  	var localHeightZone = ($(window).height() + 36) * .62;

	  	document.getElementById("card-content").style.width = localWidthZone + "px";
	  	document.getElementById("card-content").style.height = localHeightZone + "px";

	    canvas_timingZone = document.getElementById("timingChart");
	    canvas_timingZone.width = $(window).width() * chart_width_scalar_timing;
	    canvas_timingZone.height = $(window).height() * chart_height_scalar_timing;
	    myChart_timingZone = new Chart(canvas_timingZone.getContext("2d")).Line(timingData, timingResizeLineAttributes);
	  } else if(schedulingModeZone.selected == "basic") {	
			var localHeightZone = $(window).height() * .5;
			document.getElementById("card-content").style.height = localHeightZone + "px";
	  */
	    redrawTimingOnInputZone()
	 	}

	});

	//var labels = ["7 AM", "8 AM", "9 AM", "10 AM", "11 AM", "12 PM", "1 PM", "2 PM", "3 PM", "4 PM", "5 PM", "6 PM", "7 PM", "8 PM", "9 PM", "10 PM", "11 PM", "12 AM", "1 AM", "2 AM", "3 AM", "4 AM", "5 AM", "6 AM"];

	var timingLabels = ["00:00", "01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00", "24:00"];

	var timingData = {
	  labels: timingLabels,
	  datasets: [{
	    fillColor: "rgba(63, 81, 181, 0.25)",
	    strokeColor: "#3f51b5",
	    pointColor: "#fff",
	    pointStrokeColor: "#3f51b5",  
	    data: timingDataArrayZone
	  }]
	};

	var timingLineAttributes = {
	  scaleOverride: true,
	  scaleSteps: 10,   
		scaleLabel: "<%= value + \"%\" %>",
	  scaleStartValue: 0,
	  scaleStepWidth: 10,
	  scaleShowLabels: true,
	  scaleFontSize: 12,
	};


	var timingResizeLineAttributes = {
	  animation: false,
	  scaleOverride: true,
	  scaleSteps: 10,
		scaleLabel: "<%= value + \"%\" %>",
	  scaleStartValue: 0,
	  scaleStepWidth: 10,
	  scaleShowLabels: true,
	  scaleFontSize: 12,
	};

	var timingRedrawLineAttributes = {
	  showTooltips: true,
	  scaleOverride: true,
	  scaleSteps: 10,
		scaleLabel: "<%= value + \"%\" %>",
	  scaleStartValue: 0,
	  scaleStepWidth: 10,
	  scaleShowLabels: true,
	  scaleFontSize: 12,
	};

	Polymer({
	    is: 'scheduling-controller-zone',

	    behaviors: [
	      Polymer.NeonAnimatableBehavior
	    ],

	    properties: {

	      speaker: {
	        type: Object
	      },

	    	animationConfig: {
	        value: function() {
	          return {
	            'entry': {
	                name: 'fade-in-animation',
	                node: this
	              },
	            'exit': {
	              // provided by neon-animation-animations/fade-out-animation.html
	              name: 'slide-left-animation',
	              node: this
	            }
	          }
	        }
	      }
	    },

	    loadDayZone: loadDayOutsideZone,

	    /*
	    loadDay: function() {
	    	console.log(this.$);

	    	var selectedDay = this.$.dayListbox.selected;
	    	console.log("day" + selectedDay);
	    	console.log(this.speaker);
	    	if(this.$.schedulingSelector.selected == "basic") {
	    		if(this.speaker.Schedule[selectedDay][2] != -1 || this.speaker.Schedule[selectedDay][3] != -1) {
	      		this.$.upTimeListBox.selected = this.speaker.Schedule[selectedDay][2];
	      		this.$.downTimeListBox.selected = this.speaker.Schedule[selectedDay][3];

	      		this.$.rampUpLevelListbox.selected = this.speaker.Schedule[selectedDay][this.speaker.Schedule[selectedDay][2] + 4] / 10;
	      		this.$.rampDownLevelListbox.selected = this.speaker.Schedule[selectedDay][this.speaker.Schedule[selectedDay][3] + 4] / 10;
	      		this.$.intervalListbox.selected = this.speaker.Schedule[selectedDay][1];
	    		} else {
	    			this.$.upTimeListBox.selected = -1;
	      		this.$.downTimeListBox.selected = -1;
	      		this.$.rampUpLevelListbox.selected = -1;
	      		this.$.rampDownLevelListbox.selected = -1;
	      		this.$.intervalListbox.selected = -1;
	    		}
	    	} else if(this.$.schedulingSelector.selected = "advanced") {
	    		timingDataArrayZone = this.speaker.Schedule[selectedDay].slice(4, 29);
	    		var times = document.getElementsByClassName("times");

	    		for(var x = 0; x < timingDataArrayZone.length; x++) {
	    			times[x].value = timingDataArrayZone[x];
	    			times[x + 1].value = timingDataArrayZone[0];
	    		}
	    		redrawTimingOnInput()

	    		console.log(timingDataArrayZone);
	    	} else {
	    		alert("i am break");
	    	}
	    },
	    */

	    scheduleTimeZone: function() {

	    	console.log(this.$.intervalListboxZone.selected);

	      var scheduleTimeAjaxZone = document.querySelector("#scheduleTimeAjaxZone");

	      if(schedulingModeZone.selected == "advanced") {
			    var timesZone = document.getElementsByClassName("timesZone");
					var timesArrayZone = [];
					for (var i = 0; i < timesZone.length; i++) {
						var timesParse = parseInt(times[i].value);

						if(isNaN(timesParse)) {
							return;
						}
						timesArrayZone.push(timesParse);
					}

					scheduleTimeAjaxZone.body = {
						"zone" 			: speaker.zone.zoneID,
						"mode"			: 1,
						"start"			: -1,
						"end"				: -1,
						"day" 			: parseInt(this.$.dayListboxZone.selected),
						"interval"	: 60,
						"times" 		:	timesArrayZone
					};

					scheduleTimeAjaxZone.generateRequest();
	      } else if(schedulingModeZone.selected == "basic") {
	      	var upTime = this.$.upTimeListBoxZone.selected;
	      	var downTime = this.$.downTimeListBoxZone.selected;

	      	//if they are not all filled in then return and inform the user
	      	//var interval = this.$.interval.value;
	      	console.log("this is the interval", this.$.interval);

	      	var timesArrayZone = [];
	      	// these might need to change to ""zone
	      	rampUpLevel = this.$.rampUpLevelListboxZone.selected
	      	rampDownLevel = this.$.rampDownLevelListboxZone.selected
	      	var i = 0;
	      	for(i = 0; i < upTime; i++) {
	      		//timesZone.push(this.$.rampDownLevel);
	      		timesArrayZone.push(rampDownLevel * 10);
	      	}	
	      	for(i; i < downTime; i++) {
	      		//timesZone.push(this.$.rampDownLevel);
	      		timesArrayZone.push(rampUpLevel * 10);
	      	}
	      	for(i; i < 24; i++) {
	      		//timesZone.push(this.$.rampDownLevel);
	      		timesArrayZone.push(rampDownLevel * 10);
	      	}

					scheduleTimeAjaxZone.body = {
						"zone" 			: speaker.zone.zoneID, 
						"mode"			: 0,
						"start"			: parseInt(this.$.upTimeListBoxZone.selected),
						"end"				: parseInt(this.$.downTimeListBoxZone.selected),
						"day" 			: parseInt(this.$.dayListboxZone.selected),
						"interval"	: parseInt(this.$.intervalListboxZone.selected),
						"times" 		:	timesArrayZone
					};

					scheduleTimeAjaxZone.generateRequest();

	      	console.log(timesArrayZone);
	      }
		  },

	  	redrawTimingOnInputZone: redrawTimingOnInputZone,

	  	_logResponse: function(event, data) {
	  		// REMOVE ALL OF THESE
	  		console.log(data.response);
	  	},

	    ready: function() {
	    	console.log("THIS IS THE DAY", day);
	    	this.$.dayListboxZone.selected = day;
	    	console.log(this.$.dayListboxZone.selected);
	    	schedulingModeZone = this.$.schedulingSelectorZone; 
	    	console.log("i have read the selected value", schedulingModeZone); 	
	    	console.log(schedulingModeZone);
	    	console.log("im the ready selected  ", this.$);

				console.log(this.zone);
				ssZone = this.$;

	    }

	  });

	function loadDayOutsideZone() {
		console.log(ss);

		var selectedDay = ssZone.dayListboxZone.selected;
		console.log("day" + selectedDay);
		//console.log(zones[0]);
		console.log(ssZone.schedulingSelectorZone.selected);
		if(ssZone.schedulingSelectorZone.selected == "basic") {
			if(zones[speaker.zone.zoneID - 1].Schedule[selectedDay][2] != -1 || zones[speaker.zone.zoneID - 1].Schedule[selectedDay][3] != -1) {
				ssZone.upTimeListBoxZone.selected = zones[speaker.zone.zoneID - 1].Schedule[selectedDay][2];
				ssZone.downTimeListBoxZone.selected = zones[speaker.zone.zoneID - 1].Schedule[selectedDay][3];

				ssZone.rampUpLevelListboxZone.selected = zones[speaker.zone.zoneID - 1].Schedule[selectedDay][zones[speaker.zone.zoneID - 1].Schedule[selectedDay][2] + 4] / 10;
				ssZone.rampDownLevelListboxZone.selected = zones[speaker.zone.zoneID - 1].Schedule[selectedDay][zones[speaker.zone.zoneID - 1].Schedule[selectedDay][3] + 4] / 10;
				ssZone.intervalListboxZone.selected = zones[speaker.zone.zoneID - 1].Schedule[selectedDay][1];
			} else {
				ssZone.upTimeListBoxZone.selected = -1;
				ssZone.downTimeListBoxZone.selected = -1;
				ssZone.rampUpLevelListboxZone.selected = -1;
				ssZone.rampDownLevelListboxZone.selected = -1;
				ssZone.intervalListboxZone.selected = -1;
			}
		} else if(ssZone.schedulingSelectorZone.selected == "advanced") {
			timingDataArrayZone = zones[speaker.zone.zoneID - 1].Schedule[selectedDay].slice(4, 29);
			var times = document.getElementsByClassName("timesZone");

			for(var x = 0; x < timingDataArrayZone.length; x++) {
				times[x].value = timingDataArrayZone[x];
				times[x + 1].value = timingDataArrayZone[0];
			}
			redrawTimingOnInputZone()

			console.log(timingDataArrayZone);
		} else {
			alert("i hava make a break");
		}
	}


	function redrawTimingZone(drawingData, drawingLineAttributes) {
		console.log("I got here");
		/*
	  $($(canvas_timingZone).parent()).prepend("<canvas id=\"timingChart\" style=\"margin-left: calc(.02 * 100vh); margin-right: calc(.02 * 100vh); margin-top: calc(.02 * 100vh);\" class=\"chartClass\"></canvas>");
	  canvas_timingZone.remove();

	  canvas_timingZone = document.getElementById("timingChart");
	  canvas_timingZone.width = $(window).width() * chart_width_scalar_timing;
	  canvas_timingZone.height = $(window).height() * chart_height_scalar_timing;
	  myChart_timingZone = new Chart(canvas_timingZone.getContext("2d")).Line(drawingData, drawingLineAttributes);
		*/

		//var canvas_timingZone = document.getElementById("timingChartZone");
		$($(canvas_timingZone).parent()).prepend("<canvas id=\"timingChartZone\" style=\"margin-left: calc(.02 * 100vh); margin-right: calc(.02 * 100vh); margin-top: calc(.02 * 100vh);\" class=\"chartClass\"></canvas>");

		console.log("now im here");

	  canvas_timingZone.remove();		

	  var localWidthZone = $(window).width() * .82;
		var localHeightZone = ($(window).height() + 36) * .62;

		document.getElementById("card-contentZone").style.width = localWidthZone + "px";
		document.getElementById("card-contentZone").style.height = localHeightZone + "px";

	  canvas_timingZone = document.getElementById("timingChartZone");
	  canvas_timingZone.width = $(window).width() * chart_width_scalar_timing;
	  canvas_timingZone.height = $(window).height() * chart_height_scalar_timing;

	  console.log("i think im here");

	  console.log(timingDataArrayZone);

	  myChart_timingZone = new Chart(canvas_timingZone.getContext("2d")).Line(drawingData, drawingLineAttributes);

	  console.log("and now im here...");
	}

	function redrawTimingOnInputZone() {
	  var errorAdjustToastZone = document.getElementById("errorAdjustToastZone");
	  var strokeColor = "#3f51b5";
	  var pointStrokeColor = "#3f51b5";
	  var fillColor = "rgba(63, 81, 181, .25)";

	  console.log("redrawTimingOnInputZone");

	  $(document.getElementsByClassName("timesZone")).each(function(i) {
	  	console.log(i, this.value);

	    if(this.value > -1 && this.value < 101 && this.value !== "") {
	    	console.log("in the bigger One");
	      timingDataArrayZone[i] = parseInt(this.value);
	    } else {
	    	console.log("not in the bigger one");
	      timingDataArrayZone[i] = null;
	      
	      // Set the error colors
	      strokeColor = "#F33F31";
	      pointStrokeColor = "#F33F31";
	      fillColor = "rgba(243, 63, 49, .25)";

	      if(isNaN(this.value)) {
	        errorAdjustToastZone.text = "Invalid entry for " + timingLabels[i] + "Hz: Only numerical values are accepted";
	        errorAdjustToastZone.show();
	      } else if (this.value === "") {

	      } else {
	        errorAdjustToastZone.text = "Invalid entry for " + timingLabels[i] + "Hz: Accepted range of values is -20 to 80";
	        errorAdjustToastZone.show();
	      }
	    }
	  });

	  var timingRedrawData = {
	    labels: timingLabels,
	    datasets: [{
	      fillColor: fillColor,
	      strokeColor: strokeColor,
	      pointColor: "#fff",
	      pointStrokeColor: pointStrokeColor,  
	      data: timingDataArrayZone,
	      }]
	  };

	  redrawTimingZone(timingRedrawData, timingRedrawLineAttributes);
	}

</script>
</dom-module>