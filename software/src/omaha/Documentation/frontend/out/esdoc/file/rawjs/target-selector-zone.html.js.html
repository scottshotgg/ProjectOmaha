<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">rawjs/target-selector-zone.html.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">rawjs/target-selector-zone.html.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">    window.addEventListener(&apos;WebComponentsReady&apos;, function(e) {
      //console.log(&quot;WebComponentsReady&quot;);
      //console.log();
    });

    //console.log(document.getElementById(&quot;targetZone&quot;));

    var dataArrayZone = [];
    //console.log(dataArrayZone);

    var labelsZone = [&quot;80&quot;, &quot;100&quot;, &quot;125&quot;, &quot;160&quot;, &quot;200&quot;, &quot;250&quot;, &quot;315&quot;, &quot;400&quot;, &quot;500&quot;, &quot;630&quot;, &quot;800&quot;, &quot;1k&quot;, &quot;1.25k&quot;, &quot;1.6k&quot;, &quot;2k&quot;, &quot;2.5k&quot;, &quot;3.15k&quot;, &quot;4k&quot;, &quot;5k&quot;, &quot;6.3k&quot;, &quot;8k&quot;];


    var dataZone = {
      labels: labelsZone,
      datasets: [{
        fillColor: &quot;rgba(63, 81, 181, 0.25)&quot;,
        strokeColor: &quot;#3f51b5&quot;,
        pointColor: &quot;#fff&quot;,
        pointStrokeColor: &quot;#3f51b5&quot;,  
        data: dataArrayZone,
      }]
    };

    var lineAttributesZone = {
      scaleOverride: true,
      scaleSteps: 10,
      scaleStartValue: -20,
      scaleStepWidth: 10,
      scaleShowLabels: true,
      scaleFontSize: 12,
    };

    var resizeLineAttributesZone = {
      animation: false,
      scaleOverride: true,
      scaleSteps: 10,
      scaleStartValue: -20,
      scaleStepWidth: 10,
      scaleShowLabels: true,
      scaleFontSize: 12,
    };

    var redrawLineAttributesZone = {
      showTooltips: true,
      scaleOverride: true,
      scaleSteps: 10,
      scaleStartValue: -20,
      scaleStepWidth: 10,
      scaleShowLabels: true,
      scaleFontSize: 12,
    };

    Polymer({
      is: &apos;target-selector-zone&apos;,
      
      properties: {
        internalTargetZone: String,

        targetZone: {
          type: String,
          notify: true,
          observer: &apos;_setInternalTargetZone&apos;
        },

        speaker: {
          type: Object,
        },

        speakerId: {
          type: Number
        }
      },

    redrawOnInputZone: redrawOnInputZone,

    properties: {
      internalVolume2: Number,

       musicVolume: {
        type: Number,
        notify: true,
        observer: &apos;_setInternalMusicVolume&apos;
      },

      speakerId: {
        type: Number
      }
    },
      

      _setInternalTargetZone: function(dataArrayZoneString) {
        this.internalTargetZone = dataArrayZoneString;
        //console.log(&quot;_setInternalTargetZone&quot; + dataArrayZoneString);
      },
      
      _setTargetClickedZone: function() {
        //console.log(&quot;i was just clicked&quot;);
        var checkIntZone = 0;
        var checkBandsZone = [];
        var targetTextZone = &quot;Invalid input at &quot;;



        $(document.getElementsByClassName(&quot;inputs-zone&quot;)).each(function(i) {
          if(isNaN(this.value) || this.value &lt; -20 || this.value &gt; 80) {
            //console.log(typeof this.value, parseInt(this.value));
            //console.log(this.name);
            checkIntZone++;
            //console.log(checkBandsZone);
          }
        });

        //console.log(checkBandsZone);

        if(checkIntZone &gt; 0) {
          if(checkBandsZone.length == 1) {
            targetTextZone += checkBandsZone[0] + &quot;Hz&quot;;
          } else {
            for (var i = 0; i &lt; checkBandsZone.length - 1; i++) {
              targetTextZone += checkBandsZone[i] + &quot;Hz, &quot;
            }
            targetTextZone += &quot;and &quot; + checkBandsZone[checkBandsZone.length - 1] + &quot;Hz&quot;;
          }
          this.$.toaster.duration = 2000 + (500 * checkBandsZone.length);
          this.$.toaster.text = targetTextZone;
          this.$.toaster.show();
        } else {
          var inputsZoneArray = document.getElementsByClassName(&quot;inputs-zone&quot;);
          //console.log(inputsZoneArray);
          for(var x = 0; x &lt; inputsZoneArray.length; x++) {
            dataArrayZone[x] = inputsZoneArray[x].value;
          }

          this.dataArrayZoneString = dataArrayZone.join(&quot;, &quot;);
          for (var i = 0; i &lt; speaker.CurrentTarget.length; i++) { 
            speaker.CurrentTarget[i] = dataArrayZone[i];
          }
          this.target = dataArrayZone.join(&quot; &quot;);
          //console.log(dataArrayZone);
          this.$.toaster.text = &quot;Target set to: &quot; + dataArrayZone.join(&quot;, &quot;) + &quot;, switch to the equalizer page for further adjustment&quot;;
          this.$.toaster.show();
          //console.log(&quot;_setTargetClicked&quot;);


          this.$.updateTargetAjaxZone.body = {
            &quot;zone&quot;: speaker.zone.zoneID,
            &quot;constants&quot;: this.target,
          };

          this.$.updateTargetAjaxZone.generateRequest();
        }
      },

      _logResponse: function(event, data) {
        //console.log(data.response);
      },

      _acceptPressed: function(event) {
        var name = this.$.popupInput.value.valueOf().replace(&quot;\n&quot;, &quot;&quot;).replace(&quot;\t&quot;, &quot;&quot;);
        var ifvar = 0;
        if(speaker.zone.TargetNames.length &gt; 0) {
          for(var i = 0; i &lt; speaker.zone.TargetNames.length; i++) {
            if(name.toLowerCase() == speaker.zone.TargetNames[i].valueOf().toLowerCase()) {
              //console.log(&quot;same name dude&quot;);
              ifvar++;
            }
          }
        }

        if(ifvar &gt; 0) {
          //console.log(&quot;we are in here right now&quot;);
          this.err = &quot;Invalid name: Name already taken&quot;;
          this.$.errorAdjustToast.text = this.err;
          this.$.errorAdjustToast.show();
        } else {
          this.$.addTargetAjaxZone.body = {
            &quot;zone&quot;: speaker.zone.zoneID,
            &quot;name&quot;: name,
            &quot;update&quot;: false,
            &quot;constants&quot;: dataArrayZone.join(&quot; &quot;)
          };

          //console.log(&quot;addTargetAjax:&quot;, addTargetAjaxZone.body);
          this.$.addTargetAjaxZone.generateRequest();
          //console.log(this.$.addTargetAjaxZone.body);
          this.$.dialog.toggle();

          this.$.errorAdjustToast.text = &quot;Added target: &quot; + name + &quot; &quot; + dataArrayZone.join(&quot;, &quot;);
          //console.log(this.$.errorAdjustToast.text);

          this.$.errorAdjustToast.show();

          temp = document.createElement(&quot;paper-item&quot;);
          temp.setAttribute(&quot;value&quot;, name);
          temp.setAttribute(&quot;id&quot;, name);
          temp.innerHTML = name;
          Polymer.dom(this.$.targetListbox).appendChild(temp);

          var length = speaker.zone.Target.length;

          //console.log(dataArrayZone);

          var dataArrayZoneCopy = dataArrayZone.slice();

          //console.log(&quot;dataArrayZoneCopy: &quot;, dataArrayZoneCopy);

          speaker.zone.TargetNames[speaker.zone.TargetNames.length] = name;

          //console.log(speaker.zone.Target);

          this.$.targetListbox.selected = name;
          this.$.popupInput.value = &quot;&quot;;
        }
      },

      _cancelPressed: function(event) {
        this.$.targetListbox.selected = -1;
        //console.log(lastSelected);
      },

      listeners: {
        &apos;targetListbox.iron-select&apos;: &apos;_presetSelectionChanged&apos;
      },
      
      _presetSelectionChanged: function(event) {
        var selected = this.$.targetListbox.selected.valueOf().toLowerCase().replace(&quot;\n&quot;, &quot;&quot;);

        if(selected == &quot;currently applied&quot;) {
          this.$.errorAdjustToast.text = &quot;Currently applied constants loaded! &quot; + dataArrayZone.join(&quot;, &quot;);
          this.$.errorAdjustToast.show();

          lastSelected = this.$.targetListbox.selected;

          for (var i = 0; i &lt; speaker.zone.CurrentTarget.length; i++) { 
            dataArrayZone[i] = speaker.zone.CurrentTarget[i];
          }

          redrawZone(dataZone, lineAttributesZone);

          $(document.getElementsByClassName(&quot;inputs-zone&quot;)).each(function(j) {
            this.value = dataArrayZone[j];
          });
        } else if(selected == &quot;add new target&quot;) {
            var addTargetAjaxZone = document.getElementById(&quot;addTargetAjaxZone&quot;);
            //console.log(addTargetAjaxZone);
            this.$.dialog.toggle();
        } else if(speaker.zone.TargetNames.length &gt; 0) {
            lastSelected = this.$.targetListbox.selected;
            var associationLink = -1;
            for (k in speaker.zone.TargetNames) {
              if(selected == speaker.zone.TargetNames[k].valueOf().toLowerCase()) {
                associationLink = k;
                //console.log(&quot;associationLink&quot;, associationLink);
                break;
              }
            }
            if(associationLink != -1) {
              //console.log(speaker.zone.Target.length);

              for (var j = 0; j &lt; speaker.zone.Target[0].length; j++) {
                dataArrayZone[j] = speaker.zone.Target[associationLink - 1][j]; 
              }

              $(document.getElementsByClassName(&quot;inputs-zone&quot;)).each(function(k) {
                this.value = dataArrayZone[k];
              });

              redrawOnInputZone(dataZone, lineAttributesZone);
              this.$.errorAdjustToast.text = this.$.targetListbox.selected + &quot; target loaded! &quot; + dataArrayZone.join(&quot;, &quot;);
              this.$.errorAdjustToast.show();
              //console.log(&quot;Speaker &quot; + speaker.zone.zoneID + &quot; selected target: &quot; + selected);
            }
          }
        },

      ready: function() {
        //console.log(&quot;target stuff zone&quot;, this.internalTarget, this.target);
        this.internalTarget = this.target;
        //console.log(&quot;I am ready &quot; + this.internalTarget);
        //console.log(&quot;ready shit&quot;, this.$.targetChartZone);
        
      }
    });

    var myChartZone;

    var canvasZone = document.getElementById(&quot;targetChartZone&quot;);
    var chart_width_scalar = .8;
    var chart_height_scalar = .55;


  $(document).ready(function() {
    canvasZone = document.getElementById(&quot;targetChartZone&quot;);
    canvasZone.width = $(window).width() * chart_width_scalar;
    canvasZone.height = $(window).height() * chart_height_scalar;

    $(document.getElementsByClassName(&quot;inputs-zone&quot;)).each(function(i) {
      this.value = dataArrayZone[i];
    });

    //console.log(&quot;dater zone&quot;);
    //console.log(dataZone, lineAttributesZone);

    myChartZone = new Chart(canvasZone.getContext(&quot;2d&quot;)).Line(dataZone, lineAttributesZone);
  });


  $(window).resize(function() {
    $($(canvasZone).parent()).prepend(&quot;&lt;canvas id=\&quot;targetChartZone\&quot; style=\&quot;margin-left: calc(.02 * 100vh); margin-right: calc(.02 * 100vh); margin-top: calc(.02 * 100vh);\&quot; class=\&quot;chartClass\&quot;&gt;&lt;/canvas&gt;&quot;);
    canvasZone.remove();

    //console.log(canvasZone);

    canvasZone = document.getElementById(&quot;targetChartZone&quot;);
    canvasZone.width = $(window).width() * chart_width_scalar;
    canvasZone.height = $(window).height() * chart_height_scalar;
    myChartZone = new Chart(canvasZone.getContext(&quot;2d&quot;)).Line(dataZone, resizeLineAttributesZone);
  });

  function redrawZone(drawingData, drawingLineAttributes) {
    $($(canvasZone).parent()).prepend(&quot;&lt;canvas id=\&quot;targetChartZone\&quot; style=\&quot;margin-left: calc(.02 * 100vh); margin-right: calc(.02 * 100vh); margin-top: calc(.02 * 100vh);\&quot; class=\&quot;chartClass\&quot;&gt;&lt;/canvas&gt;&quot;);
    canvasZone.remove();

    canvasZone = document.getElementById(&quot;targetChartZone&quot;);
    //console.log(&quot;this is the canvasZone&quot;, canvasZone);
    canvasZone.width = $(window).width() * chart_width_scalar;
    canvasZone.height = $(window).height() * chart_height_scalar;
    myChartZone = new Chart(canvasZone.getContext(&quot;2d&quot;)).Line(drawingData, drawingLineAttributes);

  }

  function redrawOnInputZone() {
    //console.log(&quot;I am being called: redrawOnInputZone&quot;);
    var errorAdjustToast = document.getElementById(&quot;errorAdjustToast&quot;);
    var strokeColor = &quot;#3f51b5&quot;;
    var pointStrokeColor = &quot;#3f51b5&quot;;
    var fillColor = &quot;rgba(63, 81, 181, .25)&quot;;

    //console.log(dataArrayZone);

    $(document.getElementsByClassName(&quot;inputs-zone&quot;)).each(function(i) {
      //console.log(dataArrayZone.length);
      if(this.value &gt; -21 &amp;&amp; this.value &lt; 81 &amp;&amp; this.value !== &quot;&quot;) {
        dataArrayZone[i] = parseInt(this.value);
      } else {
        dataArrayZone[i] = null;
        
        // Set the error colors
        strokeColor = &quot;#F33F31&quot;;
        pointStrokeColor = &quot;#F33F31&quot;;
        fillColor = &quot;rgba(243, 63, 49, .25)&quot;;

        if(isNaN(this.value)) {
          errorAdjustToast.text = &quot;Invalid entry for &quot; + labelsZone[i] + &quot;Hz: Only numerical values are accepted&quot;;
          errorAdjustToast.show();
        } else if (this.value === &quot;&quot;) {

        } else {
          errorAdjustToast.text = &quot;Invalid entry for &quot; + labelsZone[i] + &quot;Hz: Accepted range of values is -20 to 80&quot;;
          errorAdjustToast.show();
        }
      }
    });

    var redrawDataZone = {
      labels: labelsZone,
      datasets: [{
        fillColor: fillColor,
        strokeColor: strokeColor,
        pointColor: &quot;#fff&quot;,
        pointStrokeColor: pointStrokeColor,  
        data: dataArrayZone,
        }]
    };

    redrawZone(redrawDataZone, redrawLineAttributesZone);
  }
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.7)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
